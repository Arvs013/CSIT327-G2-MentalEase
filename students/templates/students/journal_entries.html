{% extends 'students/base_user.html' %}
{% load static %}

{% block title %}My Journal Entries - MentalEase{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'students/css/journal_entries.css' %}">
{% endblock %}

{% block content %}
    <!-- Page Container with dashboard-style background -->
    <div class="gradient-background"></div>
    <div class="mental-health-cover"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="page-container">

        <div class="form-card">
            <header class="header">
                <h1>My Journal Entries</h1>
            </header>

            <!-- Action Bar -->
            <div class="action-bar">
                <a href="{% url 'dashboard' %}" class="journal-action-btn">Back to Dashboard</a>
                <div class="entry-count">
                    <span id="totalEntries">{{ journals|length }}</span> Total Entries
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="filter-section">
                <input type="text" id="searchInput" placeholder="Search entries..." class="form-input">
                <select id="sortSelect" class="form-input">
                    <option value="newest">Newest First</option>
                    <option value="oldest">Oldest First</option>
                </select>
            </div>

            <!-- Journal Entries List -->
            <div class="entries-container" id="entriesContainer">
                <div class="empty-state" id="emptyState" {% if journals %}style="display:none;"{% endif %}>
                    <h3>No Journal Entries Yet</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Journal Entry</h3>
                <button id="closeEditModal" class="close-button">&times;</button>
            </div>
            <form id="editForm">
                <textarea id="editTextarea" rows="10" class="form-input" placeholder="Edit your journal entry..."></textarea>
                <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                    <button type="button" id="cancelEditBtn" class="journal-action-btn" style="flex: 1; background: #6b7280;">Cancel</button>
                    <button type="submit" class="journal-action-btn" style="flex: 1;">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Delete Entry?</h3>
                <button id="closeDeleteModal" class="close-button">&times;</button>
            </div>
            <p style="margin-bottom: 1.5rem; color: #6b7280;">Are you sure you want to delete this journal entry? This action cannot be undone.</p>
            <div style="display: flex; gap: 0.75rem;">
                <button id="cancelDeleteBtn" class="journal-action-btn" style="flex: 1; background: #6b7280;">Cancel</button>
                <button id="confirmDeleteBtn" class="journal-action-btn" style="flex: 1; background: #dc2626;">Delete</button>
            </div>
        </div>
    </div>

{% endblock %}

{% block extra_js %}
<!-- Your custom JS -->
<script src="{% static 'students/js/journal_entries.js' %}"></script>
{% endblock %}
